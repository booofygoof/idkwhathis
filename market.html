<!DOCTYPE html>
<html>
    <head>
        <title>MONYMARKET</title>
        <link rel="stylesheet" href="style.css" />
        <link rel="shortcut icon" type="image/png" width="32px" href="public/favicon-32x32.png"/>
        <link rel="icon" type="image/png" sizes="16x16" href="public/favicon-16x16.png"/>
        <meta http-equiv="Permissions-Policy" content="interest-cohort=()">

        <script src="https://unpkg.com/web3@1.10.0/dist/web3.min.js"></script>
        
        <!-- metadata fetch -->
        <script>
            const fetchNFTData = async (collection, id) => {
                //if u steal this fuk u
                const apiKey = "51af642c93d846f7821865a7e3ab05d1";
                const apiKeySecret = "806aff78b8b94437a04ee0b13d5d0612";
                const nftUrl = `https://nft.api.infura.io/networks/1/nfts/${collection}/tokens/${id}?resyncMetadata=false`;
                
                const response = await fetch(nftUrl, {
                headers: {
                    'Authorization': `Basic ${btoa(`${apiKey}:${apiKeySecret}`)}`,
                    'Accept': 'application/json'
                }
                });
            
                if (response.ok) {
                const data = await response.json();
                // Handle the response data
                //console.log(data);
                return data;
                } else {
                console.error('Fetch Error:', response.status, response.statusText);
                }
            };
            function editCID (meta) {
                console.log('we are get meta picture here:',meta);
                return meta.slice(6)
            }
        </script>
        <!-- frontend stuff -->
        <script>
            //Dropdown
                // Select all dropdown parent elements
                var dropdownParents = document.querySelectorAll('.dropdown');
            
                // Add click event listener to each dropdown parent
                dropdownParents.forEach(function (parent) {
                parent.addEventListener('click', function () {
                    // Toggle the "active" class on the clicked dropdown parent
                    this.classList.toggle('active');
            
                    // Toggle the visibility of the dropdown content
                    var dropdownContent = this.querySelector('.dropitems');
                    dropdownContent.classList.toggle('show');
                });
                });
            
                // Close the dropdown when clicking outside of it
                window.addEventListener('click', function (event) {
                dropdownParents.forEach(function (parent) {
                    if (!parent.contains(event.target)) {
                    parent.classList.remove('active');
                    var dropdownContent = parent.querySelector('.dropitems');
                    dropdownContent.classList.remove('show');
                    }
                });
                });
            //Popup
                function closePop(which) {
                    var pop;
                    switch(which){
                        case 1:
                            pop = document.getElementById('pop');
                            break;
                        case 2:
                            pop = document.getElementById('pop2');
                            break;
                        default:
                            pop = document.getElementById('pop');
                            break;
                    }
                    pop.innerHTML = '';
                    pop.style.display = 'none';
                }
                showPop = (which) => {
                    var pop;
                    switch(which){
                        case 1:
                            pop = document.getElementById('pop');
                            pop.innerHTML += '<div class="x" onclick="closePop(1)">x</div>'
                            break;
                        case 2:
                            pop = document.getElementById('pop2');
                            pop.innerHTML += '<div class="x" onclick="closePop(2)">x</div>'
                            break;
                    }
                    pop.style.display = 'block';
                }
                popPop = (innerHTML,which) => {
                    var pop;
                    switch(which){
                        case 1:
                            pop = document.getElementById('pop');
                            pop.innerHTML = '<div class="x" onclick="closePop(1)">x</div>'+innerHTML;
                            break;
                        case 2:
                            pop = document.getElementById('pop2');
                            pop.innerHTML = '<div class="x" onclick="closePop(2)">x</div>'+innerHTML;
                            break;
                    } 
                }
            //Get
                function get(id) {
                   return document.getElementById(id);
                }
        </script>
    </head>

    
    <body>
        
        <div class="toolbar">
            <div class="topbar">
                <p>Mony</p>
            </div>
            <div class="menu">
                <div class="logo">
                    <img src="public/logo.png"/>
                </div>
                <div class="options">
                    <ul>
                        <li>
                            <div class="dropdown">
                                Collections
                                <div class="dropitems">
                                    <a href="https://nftx.io/vault/0x855882cc65ba66cdbc7a8c512143f10169891307/buy/" target="_blank">MiladyStation</a>
                                    <a href="https://opensea.io/collection/cigstation" target="_blank">CigStation</a>
                                    <a href="https://opensea.io/collection/mony-missingno" target="_blank">MissingNo.</a>
                                </div>
                            </div>
                        </li>

                        </li>
                        <li>                                
                            <div class="dropdown">
                            Games
                                <div class="dropitems">
                                    <a href="https://miladycola.net" target="_blank">MiladyCola</a>
                                    <a href="https://monygroup.net/market" target="_blank">MonyMarket</a>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="dropdown">
                            Services
                                <div class="dropitems">
                                    <a href="#">Smart Contract Development</a>
                                    <a href="#">Website Development</a>
                                    <a href="#">Audits</a>
                                </div>
                            </div>
                        </li>
                        <li><a href="#">About Us</a></li>
                    </ul>
                </div>
                <div class="search">
                    <input placeholder="search"></input>
                </div>
            </div>
        </div>
            
        <div id="market">
            <div class="collectibles">
                <h1>MONY MARKET</h1>
                <h3>Current Listings</h3>
            </div>
            <div class="market-tool">
                <button onclick="wizardFlow()">Create Listing</button>
            </div>
            <div id="listings"></div>
        </div>

        <div id="pop"></div>
        <div id="pop2"></div>

        <div class="footerwrap">
            <div class="footer">
                <div class="miladystationlogo">
                    <img src="public/bwlogo.png" width="120px" height="90px"/>
                </div>
                <p class="footerblurb">Mony Group Corporation Website</p>
                <div class="footeroption">
                    <ul>
                        <li>Home</li>
                        <li>Terms of Use</li>
                        <li>Privacy Policy</li>
                        <li>MiladyStation.Net</li>
                        <li>Contact Us</li>
                    </ul>
                </div>
                <br/>
                <div class="footerfooter">
                    <p class="copyleft">2023 Mony Group Corporation</p>
                </div>
            </div>
        </div>
        
        <!-- web3 -->
        <script>
            console.log('version 63')
                //const provider = new Web3.givenProvider || new Web3.providers.WebsocketProvider('wss://mainnet.infura.io/ws/v3/51af642c93d846f7821865a7e3ab05d1');
                var web3 = new Web3(new Web3.providers.WebsocketProvider('wss://mainnet.infura.io/ws/v3/51af642c93d846f7821865a7e3ab05d1'));
    
                //console.log('givenProvider:',provider);
                
                //console.log('web3 object',web3)
    
                var connected = false;
                var accounts = [];
                var friend = false;
                var approveSell;
                var approveBuy;
    
                var listings = [];
                var listingCount = 0;
                var listingTotal = 2;
                var target;
                var open = false;
                
                var gotProps = false;
                var chainScanPre = 'https://etherscan.io/tx/'
    
                const marketAddress = "0x9587Ff2Ac2C9928C5f13dcaF00ED95B46DBc9E5A";  //mainIII
                const marketABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"CurrencyAllowanceError","type":"error"},{"inputs":[],"name":"NewOwnerIsZeroAddress","type":"error"},{"inputs":[],"name":"NoHandoverRequest","type":"error"},{"inputs":[],"name":"SaleNotOn","type":"error"},{"inputs":[],"name":"TokenApprovalError","type":"error"},{"inputs":[],"name":"Unauthorized","type":"error"},{"inputs":[],"name":"YouDontOwn","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pendingOwner","type":"address"}],"name":"OwnershipHandoverCanceled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pendingOwner","type":"address"}],"name":"OwnershipHandoverRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"oldOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"seller","type":"address"},{"indexed":false,"internalType":"address","name":"buyer","type":"address"},{"indexed":false,"internalType":"address","name":"collection","type":"address"},{"indexed":false,"internalType":"address","name":"currency","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"Purchase","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256[]","name":"listings","type":"uint256[]"}],"name":"StallRequest","type":"event"},{"inputs":[],"name":"cancelOwnershipHandover","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"erc","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"checkFormat","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"pendingOwner","type":"address"}],"name":"completeOwnershipHandover","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"listingId","type":"uint256"}],"name":"deleteListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newPrice","type":"uint256"},{"internalType":"uint256","name":"listingId","type":"uint256"}],"name":"editPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"listingCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"listingList","outputs":[{"internalType":"bool","name":"saleOn","type":"bool"},{"internalType":"uint256","name":"erc","type":"uint256"},{"internalType":"address","name":"seller","type":"address"},{"internalType":"address","name":"collection","type":"address"},{"internalType":"address","name":"currency","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"marketOpen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"openSwitch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"result","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pendingOwner","type":"address"}],"name":"ownershipHandoverExpiresAt","outputs":[{"internalType":"uint256","name":"result","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ownershipHandoverValidFor","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"listingId","type":"uint256"}],"name":"purchase","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"proof","type":"bytes32[]"},{"internalType":"uint256","name":"listingId","type":"uint256"}],"name":"purchaseFriend","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"listings","type":"uint256[]"}],"name":"requestMarketStall","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"requestOwnershipHandover","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"newRoot","type":"bytes32"}],"name":"setRoot","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"erc","type":"uint256"},{"internalType":"address","name":"collection","type":"address"},{"internalType":"address","name":"currency","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"writeListing","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"bytes32[]","name":"proof","type":"bytes32[]"},{"internalType":"uint256","name":"erc","type":"uint256"},{"internalType":"address","name":"collection","type":"address"},{"internalType":"address","name":"currency","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"writeListingFriend","outputs":[],"stateMutability":"nonpayable","type":"function"}];
                var market = new web3.eth.Contract(marketABI,marketAddress);
    
                const msAddress = "0xB24BaB1732D34cAD0A7C7035C3539aEC553bF3a0";
                const msABI = [{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]
                // var ms = new web3.eth.Contract(msABI,msAddress);
    
                //functions
                    //Site+Contract logic
                    // getListingTotal = async() => {
                    //     let x = 0;
                    //     while(x = 0) {
                    //         meta = await get

                    //     }
                    // }
                    getProps = async() => {
                        var meta;
                        for(i=0;i<listingTotal;i++){
                            meta = await getListing(i);
                            if(meta){
                                showListing(meta.metadata, listings[i], i);
                            }
                            
                        }
                        try{
                            open = await market.methods.marketOpen().call();
                        } catch (err) {
                            console.log('props getter err',err);
                        }
                        
                        gotProps = true;
                    }
                    getListing = async(id) => {
                        //js listing object to make a website copy of the contract situation
                        var listing = {
                            saleOn: false,
                            erc: -1,
                            seller: 0x0000000000000000000000000000,
                            collection: 0x0000000000000000000000000000,
                            currency: 0x0000000000000000000000000000,
                            tokenId: -1,
                            price: -1
                        }
    
                        try {
                            var currentListing = await market.methods.listingList(id).call();
                            listing = currentListing;
                        } catch (err) {
                            console.log('listinglist call fail:::::',err)
                        }
                        //this saves the copy of the listing to the website listing array
                        listings[listingCount] = listing;
                        listingCount++;
                        if(listing.seller != "0x0000000000000000000000000000000000000000"){
                            var meta;
                            try {
                                meta = fetchNFTData(listing.collection,listing.tokenId);
                            } catch (err) {
                                console.log('getListing fetch metadata errr',err);
                            }
                            //this returns the metadata
                            return meta;
                        }
                    }
                    showListing = async(meta, listing, id) => {
                        var listlist = document.getElementById('listings');
                        var src = `https://mony.mypinata.cloud/ipfs${editCID(meta.image)}?pinataGatewayToken=uyN3_jcO6fLxjvmAV82o6PezM48bw7BlDk3ij1hpSOG5FSVgODrv-eIz_1OEkvAw`
                        var currencySym = await getCoinSym(listing.currency);
                        var decimals = await getCoinDec(listing.currency);
                        if (listing.saleOn) {
                            listlist.innerHTML += 
                            `
                            <div class="listing-item">
                                <img class="listing-image" src="${src}"/>
                                <h3 class="center">${meta.name}</h3>
                                <h3 class="center">${listing.price/decimals} ${currencySym}</h3>
                                <button onclick="itemFlow(${id})">BUY</button>
                            </div>
                            `
                        } else {
                            listlist.innerHTML += 
                            `
                            <div class="listing-item">
                                <img class="listing-image dark" src="${src}"/>
                                <h3 class="center">SOLD OUT</h3>
                            </div>
                            `
                        }
                        
                    }
                    getProps();
                    
                    //Market Logic
                    checkFormat = () => {
                        let erc = get("erc-input").value;
                        let collection = get("collection-input").value;
                        let currency = get("currency-input").value;
                        let tokenId = get("tokenId-input").value;
                        let price = get("price-input").value;
                        let termCheck = get("term-input").value;
                        if(
                            erc != "721" || erc != "1155" ||
                            collection.length != 42 ||
                            currency.length != 42 ||
                            price < 1000000000000
                        ){
                            return false;
                        } else {
                            return true;
                        }
                    }
                    writeListing = async() => {
                        let erc = get("erc-input").value;
                        let collection = get("collection-input").value;
                        let currency = get("currency-input").value;
                        let tokenId = get("tokenId-input").value;
                        let price = get("price-input").value;
                        let termCheck = get("term-input").value;
                        console.log('writeListingFlow','erc',erc,'collection',collection,'currency',currency,'tokenId',tokenId,'price',price,'terms',termCheck);

                        try {
                            await market.methods
                                    .writeListingFriend(proof,erc,collection,currency,tokenId,price)
                                    .send({
                                    from: accounts[0],
                                    value: 1000000000000000
                                });
                        } catch (err) {
                            console.log(err)
                        }
                    }
                    writeListingFriend = async() => {
                        event.preventDefault();
                        console.log('here we go, we merkle minting. root:',root);
                        console.dir('tree',tree);
                        var accountHash = web3.utils.soliditySha3(accounts[0]);
                        // console.log(accountHash);
                        var proof = tree.getHexProof(accountHash);

                        console.log('big if true',tree.verify(proof,accountHash,root));

                        console.log('proof',proof);

                        let erc = get("erc-input").value;
                        let collection = get("collection-input").value;
                        let currency = get("currency-input").value;
                        let tokenId = get("tokenId-input").value;
                        let price = get("price-input").value;
                        let termCheck = get("term-input").value;
                        console.log('writeListingFlow','erc',erc,'collection',collection,'currency',currency,'tokenId',tokenId,'price',price,'terms',termCheck);
                        if(checkFormat()){
                            var pass = false;
                            switch(erc){
                                case 721:
                                    //format is cool, erc721, and youre approved. go for it
                                    if(checkApproval721(collection)){
                                        //format is cool, erc721 need to approve
                                        pass = true;
                                    } else {
                                        await approve721(collection);
                                    }
                                    break;
                                case 1155:
                                    if(checkApproval1155(collection)){
                                        pass = true;
                                    } else {
                                        await approve721(collection);
                                    }
                                    break;
                            }
                            if(pass){
                                try {
                                    await market.methods
                                                .writeListingFriend(proof,erc,collection,currency,tokenId,price)
                                                .send({
                                                from: accounts[0],
                                                value: 1000000000000000
                                            });
                                } catch (err) {
                                        console.log(err)
                                }
                            }
                        } else {
                        alert('check your inputs, something is up');
                        }
                    }
          
                    
                    cancelListing = async(id) => {
                        try {
                            await market.methods.cancelListing(id).send({
                                from: accounts[0]
                            });
                        } catch (err) {
                            console.log(err);
                        }
                    }
                    editListing = async(id) => {
                        var newPrice = document.getElementById('new-price-input');
                        
                        try {
                            await market.methods.editListing(newPrice.value,id).send({
                                from: accounts[0]
                            })
                        } catch (err) {
                            console.log(err);
                        }
                    }
                    requestMarketStall = async(ids) => {
                        try {
                            await market.methods.requestMarketStall(ids).send({
                                from: accounts[0],
                                value: 77700000000000000
                            })
                        } catch (err) {
                            console.log(err);
                        }
                    }
                    
                    //erc20 logic
                    makeCoin = async(currency) => {
                        var coinAddress = currency;
                        //this is miladypeso abi tbh
                        var coinABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"delegator","type":"address"},{"indexed":true,"internalType":"address","name":"fromDelegate","type":"address"},{"indexed":true,"internalType":"address","name":"toDelegate","type":"address"}],"name":"DelegateChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"delegate","type":"address"},{"indexed":false,"internalType":"uint256","name":"previousBalance","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newBalance","type":"uint256"}],"name":"DelegateVotesChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"}],"name":"Snapshot","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"snapshotId","type":"uint256"}],"name":"balanceOfAt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint32","name":"pos","type":"uint32"}],"name":"checkpoints","outputs":[{"components":[{"internalType":"uint32","name":"fromBlock","type":"uint32"},{"internalType":"uint224","name":"votes","type":"uint224"}],"internalType":"struct ERC20Votes.Checkpoint","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"delegatee","type":"address"}],"name":"delegate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"delegatee","type":"address"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"uint256","name":"expiry","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"delegateBySig","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"delegates","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"blockNumber","type":"uint256"}],"name":"getPastTotalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"blockNumber","type":"uint256"}],"name":"getPastVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"getVotes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"numCheckpoints","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"snapshot","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"snapshotId","type":"uint256"}],"name":"totalSupplyAt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}];
                        var coin = await new web3.eth.Contract(coinABI,coinAddress);
                        return coin;
                    }
                    setAllowance = async(currency, price) => {
                        var coin = await makeCoin(currency);
                        try {
                            await coin.methods.approve(marketAddress,price).send({
                                from: accounts[0]
                            });
                        } catch (err) {
                            console.log('uhoh setAllowance error:',err)
                        }
                        itemFlow(target);
                    }
                    checkAllowance = async(currency) => {
                        var coin = await makeCoin(currency);
                        var allowance;
                        try {
                            allowance = await coin.methods.allowance(accounts[0],marketAddress).call();
                        } catch (err) {
                            console.log('uhoh checkAllownace error:',err)
                        }
                        return allowance;
                    }
                    getCoinSym = async(currency) => {
                        var coin = await makeCoin(currency);
                        var symbol;
                        try {
                            symbol = await coin.methods.symbol().call();
                        } catch (err) {
                            console.log(err);
                        }
                        return symbol;
                    }
                    getCoinDec = async(currency) => {
                        var coin = await makeCoin(currency);
                        var dec;
                        try {
                            dec = await coin.methods.decimals().call();
                        } catch (err) {
                            console.log(err);
                        }
                        return 1**dec;
                    }
                    
                    //erc721 logic
                    makeNFT721 = async(collection) => {
                        var nftAddress = collection;
                        //this is miladycola tbh
                        var nft721ABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ApprovalCallerNotOwnerNorApproved","type":"error"},{"inputs":[],"name":"ApprovalQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"BalanceQueryForZeroAddress","type":"error"},{"inputs":[],"name":"InvalidQueryRange","type":"error"},{"inputs":[],"name":"MintERC2309QuantityExceedsLimit","type":"error"},{"inputs":[],"name":"MintToZeroAddress","type":"error"},{"inputs":[],"name":"MintZeroQuantity","type":"error"},{"inputs":[],"name":"NewOwnerIsZeroAddress","type":"error"},{"inputs":[],"name":"NoHandoverRequest","type":"error"},{"inputs":[],"name":"OwnerQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"OwnershipNotInitializedForExtraData","type":"error"},{"inputs":[],"name":"TransferCallerNotOwnerNorApproved","type":"error"},{"inputs":[],"name":"TransferFromIncorrectOwner","type":"error"},{"inputs":[],"name":"TransferToNonERC721ReceiverImplementer","type":"error"},{"inputs":[],"name":"TransferToZeroAddress","type":"error"},{"inputs":[],"name":"URIQueryForNonexistentToken","type":"error"},{"inputs":[],"name":"Unauthorized","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"fromTokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"toTokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"ConsecutiveTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pendingOwner","type":"address"}],"name":"OwnershipHandoverCanceled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"pendingOwner","type":"address"}],"name":"OwnershipHandoverRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"oldOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"IPFSURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bottlePrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bulkPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"cancelOwnershipHandover","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"bottle","type":"uint256"},{"internalType":"uint256","name":"friend","type":"uint256"},{"internalType":"uint256","name":"bulk","type":"uint256"}],"name":"changePrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"pendingOwner","type":"address"}],"name":"completeOwnershipHandover","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"explicitOwnershipOf","outputs":[{"components":[{"internalType":"address","name":"addr","type":"address"},{"internalType":"uint64","name":"startTimestamp","type":"uint64"},{"internalType":"bool","name":"burned","type":"bool"},{"internalType":"uint24","name":"extraData","type":"uint24"}],"internalType":"struct IERC721A.TokenOwnership","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"tokenIds","type":"uint256[]"}],"name":"explicitOwnershipsOf","outputs":[{"components":[{"internalType":"address","name":"addr","type":"address"},{"internalType":"uint64","name":"startTimestamp","type":"uint64"},{"internalType":"bool","name":"burned","type":"bool"},{"internalType":"uint24","name":"extraData","type":"uint24"}],"internalType":"struct IERC721A.TokenOwnership[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"flipSaleState","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"holder","type":"address"}],"name":"friendCheck","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"friendPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"numberOfTokens","type":"uint256"}],"name":"mintFriend","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"numberOfTokens","type":"uint256"}],"name":"mintNew","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"result","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pendingOwner","type":"address"}],"name":"ownershipHandoverExpiresAt","outputs":[{"internalType":"uint256","name":"result","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ownershipHandoverValidFor","outputs":[{"internalType":"uint64","name":"","type":"uint64"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"requestOwnershipHandover","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"s_MAXMILADYCOLA","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"s_saleIsActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"baseURI","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"tokensOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"stop","type":"uint256"}],"name":"tokensOfOwnerIn","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]; //
                        var nft = new web3.eth.Contract(nftABI,nftAddress);
                        return nft;
                    }
                    approve721 = async(collection) => {
                        var nft = makeNFT721(collection);
                        try {
                            await nft.methods.setApprovalForAll(marketAddress,true).send({
                                from: accounts[0]
                            });
                        } catch (err) {
                            console.log('approve721 err');
                        }
                    }
                    checkApproval721 = async(collection) => {
                        var nft = makeNFT721(collection);
                        let approved = false;
                        try {
                            approved = await nft.methods.isApprovedForAll(accounts[0],marketAddress)
                        } catch(err) {
                            console.log('check approval 721 err',err);
                        }
                        return approved;
                    }
                    //erc1155 logic
                    makeNFT1155 = async(collection) => {
    
                    }
                    approve721 = async(collection) => {
    
                    }
    
                    //User logic
                    //gets accounts and checks chain id then sends to checkWallet()
                    connectWallet = async(flowSwitch) => {
                        web3 = new Web3(Web3.givenProvider);
                        market = new web3.eth.Contract(marketABI,marketAddress);
                        ms = new web3.eth.Contract(msABI,msAddress);
                        try {
                            accounts = await web3.eth.requestAccounts().then()
                            if(accounts[0]){
                                connected = true;
                            }
                        } catch(err) {
                            console.log('connectWallet requestAccounts error',err.message);
                        }
                        if(connected){
                            var networkId = await web3.eth.net.getId();
                            if (networkId !== 1) {
                                alert('change your network to main ethereum')
                            }
                            var connect = document.getElementById('connect');
                            connect.innerHTML = 'Connected';
                            connect.disabled = true;
                            connect.style.display = 'none';
                            //checkWallet should see miladystation holder
                            checkWallet();
                        }
                        var pop = document.getElementById('pop');
                        if(pop.style.display != 'none' || pop.style.display != ''){
                            switch(flowSwitch){
                                //no flow
                                case 0: 

                                case 1:
                                    itemFlow(target);
                                    
                                case 2:
                                    wizardFlow();
                            } 
                        }
                    }
                    //checks miladystation holder just for website stuff, merkle in market contract is line of defense
                    checkWallet = async() => {
                        //merkle check
                        console.log('whats in your wallet');
                        //FRIEND?????
                        console.log('here we go, we merkle minting. root:',root);
                        console.dir('tree',tree);
                        var accountHash = web3.utils.soliditySha3(accounts[0]);
                        // console.log(accountHash);
                        var proof = tree.getHexProof(accountHash);

                        console.log('big if true',tree.verify(proof,accountHash,root));
                        friend = tree.verify(proof,accountHash,root);
                        console.log('proof',proof);
                        console.log('friends',friend);
                    }
                    //user clicks buy button, needs to check approval for currency and price
                    //big, working with the item
                    itemFlow = async(id) => {
                        target = id;
                        var pop = document.getElementById('pop');
                        if(pop.style.display == '' || pop.style.display == 'none'){
                            showPop(1);
                        }
                        var innerHTML = "";
                        if(!connected) {
                            //connect button
                            innerHTML = `
                            <h3>Please Connect your Wallet</h3>
                            <button id="connect" onclick="connectWallet(1)">Connect Wallet</button>
                            `;
                        } else {
                            //seller menu
                            if(listings[id].seller == accounts[0]) {
                                console.log('emergency')
                                innerHTML = `
                                    <h3>This is your listing. Whatsup</h3>
                                    <button onclick="cancelListing(${target})">Cancel Listing</button>
                                    <input id="new-price-input">
                                    <button onclick="editListing(${target})">Edit Price</button>
                                    `;
                                console.log('EMERGENCY','seller menu innerhtml');
                            //buyer flow
                            } else {
                                //check allowance
                                if(checkAllowance(listings[id].currency) == listings[id].price){
                                    if(friend > 0){
                                        innerHTML = `
                                            <button onclick="buyFriend(${target})">BUY</button>
                                            `;
                                    } else {
                                        innerHTML = `
                                            <button onclick="buy(${target})">BUY</button>
                                            `;
                                    }
                                
                                } else {
                                    innerHTML = `
                                        <h3>Must Approve Currency for Purchase</h3>
                                        <button onclick="setAllowance('${listings[id].currency}','${listings[id].price}')">Approve Coin</button>
                                        `;
                                    console.log('allowance != price');
                                }
                            }
                        }
                        popPop(innerHTML,1);
                    }
                    wizardFlow = async() => {
                        var pop = document.getElementById('pop');
                        if(pop.style.display == '' || pop.style.display == 'none'){
                            showPop(1);
                        }
                        var innerHTML = "";
                        if (!connected) {
                            innerHTML = `
                                <h3>Please Connect your Wallet</h3>
                                <button id="connect" onclick="connectWallet(2)">Connect Wallet</button>
                            `
                        } else {
                            //make listings
                            //FRIEND?????
                            //approved nft??????
                            console.log('here we go, we merkle minting. root:',root);
                            console.dir('tree',tree);
                            var accountHash = web3.utils.soliditySha3(accounts[0]);
                            // console.log(accountHash);
                            var proof = tree.getHexProof(accountHash);

                            console.log('big if true',tree.verify(proof,accountHash,root));

                            console.log('proof',proof);
                            
                            innerHTML = `
                                    <h3>You are a friend, you can use the market for free</h3>
                                    <h3>Let's create your listing</h3>
                                    <form id="listing-form" onsubmit="return writeListingFriend()">
                                        <div>
                                            <label>NFT Token Standard</label>
                                            <input id="erc-input" placeholder="721 or 1155">
                                        </div>
                                        <div>
                                            <label>NFT Collection Contract Address</label>
                                            <input id="collection-input" placeholder="0x0000000000000000000000000000">
                                        </div>
                                        <div>
                                            <label>ERC20 Currency Contract Address</label>
                                            <input id="currency-input" placeholder="0x0000000000000000000000000000">
                                        </div>
                                        <div>
                                            <label>NFT Collection Token Id</label>
                                            <input id="tokenId-input" placeholder="69">
                                        </div>
                                        <div>
                                            <label>Price in Chosen ERC20 (include all zeros)</label>
                                            <input id="price-input" placeholder="100000000000000000000000000">
                                        </div>
                                        <div>
                                            <label>I agree to <a onclick="showTerms()">terms and conditions</a></label>
                                            <input id="terms-input" type="checkbox">
                                        </div>
                                        `;
                            if(tree.verify(proof,accountHash,root)){
                                //FRIEND
                                innerHTML += `
                                        <div>
                                            <button id="listing-form-button" type="submit">Create Market Listing</button>
                                        </div>
                                    </form>
                                `
                            } else {
                                //NOTFRIEND
                                innerHTML += `
                                        <div>
                                            <button id="listing-form-button" formaction="writeListing()">Create Market Listing</button>
                                        </div>
                                    </form>
                                `
                            }

                        }
                        popPop(innerHTML,1);
                    }
                    showTerms = () => {
                        var pop = get("pop2");
                        if(pop.style.display == '' || pop.style.display == 'none'){
                            showPop(2);
                        }
                        var innerHTML = "";
                        innerHTML = `
                            <h2>Terms and Conditions</h2>
                            <p>Double check that the url is monygroup.net/market</p>
                            <p>Double check in the wallet that the contract interaction is with ${marketAddress}</p>
                            <p>Consider this a private beta. Maybe use a separate wallet to interact</p>
                            <p>You need to setApprovalAll the contract address. The wizard automatically prompts that transaction first after checking to see if your wallet already has it approved.</p>
                            <p>Your buyer will also need to set their allowance to spend the erc20 with the contract.</p>
                            <p>IT SHOULD WORK but lmk</p>
                            <p>Also by interacting with this contract you agree that Remilia rules and penguins/apes/punks/seals/etc drool</p>
                            <p>Also you affirm that miladystation is an interesting complimentary collection and NOT A GRIFT</p>
                            <p>thank you</p>
                        `
                        popPop(innerHTML,2);
                    }
        </script>
        <!-- merkle -->
        <script src="https://cdn.jsdelivr.net/npm/merkletreejs@latest/merkletree.js"></script>
        <script>
            // miladystation holders (+ first 4 for testing )
            //first 3 wallets, forge test, forge anvil cast account 0, miladycola test wallet
            const leaves = ['0x65ccff5cfc0e080cdd4bb29bc66a3f71153382a2','0x855882cc65ba66cdbc7a8c512143f10169891307','0xa299842fd0c72ae699b08d0acce721bb738f1fc0','0xaddd5a1d51bff4d67e67ae23fad94b6b287de78c','0x8a87378502745451f1d35497a39110d9e040e885','0x68856c1fb2525e65bfb3f945e2041e24ea373c21','0x8adc376f33fd467fdf3293df4eae7de6fd5ccaf1','0xe51b692ee9671e7ea69022d1c70bdcf16fff07c5','0x151daf2c56a2dc4e618e7eb78ced353592751e41','0x41538872240ef02d6ed9ac45cf4ff864349d51ed','0xc8f7643165302508e669a64d39d767f851b477d0','0x391cd59d33aed135e8ba7475677b1bc781035b32','0xdf4abd11d93cba45f8be55e3a41c1c18c6f8e9c1','0xe316044b7c3ae5035bc99d6129d017f3b383ddd8','0x10c7f2b4741f5686a42c9fb2002e9e50ca508278','0x59ea2177a4ef0bda89b938c60b512bcdef9bbde2','0x613a0ac4968f042b773880b0173bbbbba2fec6d9','0x715f280d07b7d98b00f7eef9e4ca62e9c5dff999','0x1c6f1a832e73949c97fe335a98b6a5fc3c9c29e9','0x41c8e478f5ad4f6d1a3b73806e752821ee18e99b','0xe317c793ebc9d4a3732ca66e5a8fc4ffc213b989','0xef54a382cd59c2ab47b95f4b2d2b57176a2825fc','0x1da58933f381edf6f09e9faf2ca789b48e58bafb','0x1f78e0902d4da56b807b6779bfe758280ad5118b','0x32918dbb0dad6c0e92ebc72f024a61fb8507277e','0x77a1306348c5eb03ef7be4bdc831dd68ca4a5be8','0xa553da0483f7a84320250abd59f37fe3672fa994','0x3d97ad12d40ea711d88b53680b3ae19aa5ec870d','0xd1510e4d4263cdc50dd39a5d18d4c676fe4b0aa5','0xeeaeac4369a8475ee68bf844dc2c6db67801bdab','0x0a7a29432241895997ce9ba9e450d68d971f77f9','0x1a9a0b97ce419891f67468f81c91bc82497956e8','0x4515ac9980f685a9942385b74d42d7169ae12a29','0x4f6092a5157003bea7640349d6fadccad915980b','0x5e2889eb037aeac4f64fbb9856514f6dfebada63','0x600423a6f34475aa523a274d244947a3e7d5696d','0x6f885dfab6520bd9bdc28a5a527e40daa625a770','0x9d9f9e315d12f88ee0aa5549edf0daccec24c7f4','0xb8daf685bc37aefa017050c90013e940bb039197','0xc08b45925a4dd11426093c698d700b9023b4e3dd','0xdd2ca8a3e754da59626e579f5dc8119843335bce','0xdfcd6663f6b59cb206772c6a9dcbab7db00f3178','0xec080dbee8f60c8e6d7c3f52e10832718d2b8d5a','0x0c520d5d99df7ecbf3754ccdc1c9583495582069','0x1795953240570adc885caa16721b9fe7e26f5e26','0x1de989ddf4e3785a91d7545f6873af9e61c47dff','0x4c9e66b9a32c62def9f3e145d2b1f56ff0c3852f','0x4f1d5180c785969c64e41a5902c5616ba0285082','0x522aac80bee9f438a80d231acf4b525344ff69aa','0x7bcba9296df0a11afac47881e9c08b40371ba008','0x874df3dda021045f17542593e161c2c7366ae266','0x91443af8b0b551ba45208f03d32b22029969576c','0xa2b4d3f03b12cbe405827d171f5efe73fdfbfe83','0xa9b301e04f3fb99484e7bffdc3e4fa2b2cd75a7a','0xae418379ab3290b0029aa75926edf2db03e662bd','0xc9df186238c3bc94ffadb6f0d029f268353bc18d','0xcbcf161f0b53e534a77989d83a89cbc9d66fd1b9','0xdb1bb9262897f66a338efef6924f2d0d44680af8','0xe7a6db55ac2963a93a702b544fdcd61757a97b8e','0xf968a5de2019de1f0a8f53758dd137ae5c9efbc9','0x1b00b55ff90c942ba39dfa8eba5ceec1f2d3e945','0x1d77b4221d9bf43d60fbf011b75156f32abb8637','0x1e2083e43543bfc789906a6bc49ce020d84c742b','0x2964d617fd62994a65102c82dde82ae46d7503ff','0x2a605f3937acb3f0a8f0e65ef4ebd320367cf400','0x3893e707ef23ad48c89d4af55d289a61f42a2535','0x5c2c3764a4ba0a4ea4b81532aa48e3a72ad0655b','0x6a35b4037b9b70f3c4004488882cab9eb635571f','0x6bac9ead71e99324b636b04fdd8c3a920b3fbb88','0x744458eae66b7a0308c411860c8a82ad11d1cc68','0x9091bb463dd206ff821d97664e64340b75b5b442','0x9f533eec49dc2dbbf495f1cd687c2536d424be07','0xa8db5cc795f1ecb37333bf895e4c498871b0ad43','0xb2e01cb4c6a0e9a5df928cc893950591ad77a157','0xd0d004b4ce867785d9ab4c684f0497680aa7b6ae','0xd1282134a3481cb548504073ea31e602228f15b1','0xd6b954f59f0ebb252edc7796c64ba167a1e2efab','0xe1f27cbce0576b114789660ccc3c2b3fb932569d','0xe74fa2fc8dabf8e5117d20b82493f05cd69c874f','0x1821bd18cbdd267ce4e389f893ddfe7beb333ab6','0x18c1e5e758edd9d8cdc2feb4fd2ceec0ac6f9fd2','0x38c1a3faf39a6641f919eed30ab97526c2ea8678','0x3c382934d8fff6c7c77467308f228d611247ee59','0x64163b7f5558c54c2494fe18e09ba8ee2ec7bc8a','0x69f407d05b88686697f0c9245bb0b4715a4505c8','0x731cd5124d48d073f4370dba709846627e93f497','0x73a8c31d782d9892820dbc6f4ef23de6d930d80d','0x7490aebe717b512c1d465253909fc8262f75b047','0x7efd4acacc86521cd6e711488ba6926aa820a3e8','0x8ebe8b747cab6d473483aa3889870cf31c05d1c6','0x929d99600bb36dde6385884b857c4b0f05aede35','0x932a824a4d3d0680e0b352de150e6f212b8ac841','0x97bac212815dff849820e34b6f9a58e4c40909de','0x9860eb4ee2baa23d5713c11da45b715ffdb0c02f','0x992f8e145c5404e944aeb8f53660985daf9dc827','0xa60c0ad40d5dc8080c71e6c2550f21ca1cda1fa2','0xa8095b86474d53dca0e0bcb1452a4da73090a205','0xab193431626c43e8483aa2e79b993f5c78b648f6','0xb0d0b6da40e1b3abca12a38f5bd95793de935635','0xd2f1bd876e2f1ea5d213b82ced5c8c307856ea2e','0xd33cbaad2d21810530351b86208d69ab6e184b40','0xda22ecb2897040eb15da2a98765446ee07fdcc81','0xdfbfad8d6b792c22337e38b697b55125f9fff5b8','0xe4c57c0dd7f1c9d38079b537556dcd8009eb6b79','0xeb6b5f4eb419b6e00cd5fa4d7acb413688e41d8c','0xebd93a2611b0a35f722e79a4bf7f7f000c514a4d','0x0e124a7c9b378d7276590b6b8b676a75ff923a03','0x0f7a1e945b12867e17cfc077649e584de032e1d1','0x11da2d789fbe7aa6d8c65263bdcb50bf8a30e011','0x147d19620247bb75f3ab71066f67362b357d547c','0x1b02e600cd593ea54185915fdbd2685a0b7e4b17','0x1f9cb21d38c0dafa1a6b1bf52503bc00fd9a21a1','0x27524bff4423404f4b516367bd6a67c71876aa7d','0x2b324bf78f6842b95acbd28b8a7215f35f398d27','0x301f6a61a3462b06d03cdf7feaf3499ed0341273','0x307722be2d02a298f1a38f24eb088cd46fe349be','0x364d8fbb31da302ba53429a2d559a50a841b7722','0x38dfdac6b4805737d3168145de925363cee81541','0x392ff91c81c50777a62a3ef4e965902d4f2bdc59','0x3b84da615a62c230bc322ee74f8631ecdd150c2a','0x42b576bfe9926537cec4a83f141a9204a3f929a0','0x46ed3e4ce79e0b0634ccb03032829c076ad2a76a','0x4803ca770b9d96995fec576337f7c551d589ca47','0x48e180b4ece7478511bdc7479838a142cbc07879','0x5be1ad47a11e78bd78b66a1a41c855d899f8891b','0x5e419de1db2279ad03e5d1f32494c6e6afe9b940','0x651501a1713ccb091c84f624961196b7edc2dfac','0x661f947aad0916cf177e764c6fda2d4902f993f1','0x6b98cad135ec2a3e85134b336f9d44171591aecb','0x6d5ddd6bb1422ace04ddfedce62e8d631d1ea125','0x71db056df3be6e345f0878f79a2cbf8151839471','0x7887ef4a47fdf5fb52408ec21eb15bd2d8f1f3c5','0x7cee7bc9ea1a3d0123ea772669c27320709c90fd','0x7e41e492351e46ce82dfd0d373e6e519a02f9a69','0x8662b4a72d5544ba34c307a771ea2853af9778eb','0x8675c1c5e5a480e277cb4589a6bd17545be1e3b8','0x8b5814c0258e60bc849a483df2bc54c6dd1356d0','0x8f3093416640d0e4ef12cd9e9be9115d6dff6c6e','0x94f4869fadbcfde08a8be5c6ca22ba710543012c','0x9ac49d2ff6d3cafb8811d3de84cfe065b55cdfff','0xa218d6a3ad14cfbfc96017d5d7bceee1484bd6a5','0xa96edca564a891d7a000359da43195b5c7229f89','0xa971d9c4c302553512b89c5777873bf16c9f1d0d','0xb258a4dbfdffaa0e2a607bc3bb8e5aef3022afa7','0xb948ad632304821f1429297d81f9396a3fd5707a','0xbb4c67cd15f52f12e8e12872a9af794f1e77c544','0xbd842fb775c243fd392eb7bafc5b0db1adcb7288','0xbf1a984d641c0718a1ca48c8a5d76d569c79af17','0xc316f415096223561e2077c30a26043499d579ad','0xc3ab4f4451d65299540242bb8ab3c2c65154b3f6','0xc733240f0b1d300563c2ea490aac0c96078e9675','0xc7a669d0de21f1885361e95fde3892534807b927','0xc7ab1d2f9508a4b6a7feea042c3c7424a06ff172','0xca75f9d1f6a5fd53c20bb0899e5f7a44b3a8e811','0xd3edcc3dbf984f72b222b5a2926deb873ded7c03','0xdc1f9c98351858416fe77a546a716ef1291916b3','0xdf9941ae73a2e4264fbc3eef4443d1ff4b29c999','0xdfb84e543c39aca3c6a39ea4e3b6c40ee7d2ebda','0xdff7bfdfaabfbd88f094764d6a9b1722014569e1','0xe09764bdeff955e8a484ae7f780562c26b570782','0xe4a24b53c97a25a21fe0ee6a1a1f652a5dafe88f','0xf3ac8732c4a1738b6b9a028699b23f3ecf5a4786','0xf6f4b3d80884dcf2e602820622cafc1bcc1f9afe','0xf703dfe714ce2f071f48b72a6fcf066a2b721a00','0xfaca4d6c681085bd5281abe2542e91a8f45d897a','0xffc88fc868a01003fe5d3fcc389051a365d4f932','0x0000ce08fa224696a819877070bf378e8b131acf','0x016ab691721a99da1c1489ca0ac8b549eb0f7713','0x02397ba478ee269343e2fbaa9419c2d676f2a616','0x028922106555dd3909f7af0117062ffb6a16b9d8','0x03a16426e4a44d2e91c3af4cb7e13679db6c5e6c','0x059dc926cba4d0bb132dd91b261ba8f6500494d9','0x05a9c8bd829b5a3a9a8862e7ab6cacaa793f672c','0x07aa0abdb74d1a71239d1f8b31e3d9cd1554c261','0x0822f39d85c5530d32dfeb2a7b58a538e2e25662','0x087f2606ac8c88471ab9b011a5338c1be0f6f650','0x0d1d74535bcabda2da2cff5a53c2b899901d423b','0x0e9bc9ecdb714ebec170aec518ac75a57ab032e6','0x103d27c48c72b7c6b3b8d0882fe4073a33cabfc8','0x12c689393cf1ff581acc7cb7d250920ddc57b5d7','0x12dd0aa708c22f662611b9bb585aef9cb4c3d4d9','0x1496294adcc04f835994d5c80901c7d98061cf16','0x15a9cc72ec6dfa64ca277efcdb4041e423342808','0x1728345762cbc22d6f91a9c42b452324c2ad5bd2','0x192402b1c85bf6eb36914f4efbc5cdd75f1c3ed2','0x19e02b992c0295d27eecff941d5dbfaf85409d86','0x1ac08405e96e3561893eef86f194acdb9a24d38d','0x1d40fc9456a1e6f13f69615fee1cbcbe604b9167','0x1f5d295778796a8b9f29600a585ab73d452acb1c','0x21711e1287ee0cccbd69309af757f33be90621da','0x224da03f2e9ef7b84b6bd6f62de6f9e399eac20e','0x22c3378f9842792f9e240b11201e7c2f4901a408','0x22edd1541015945cc60d66240f3498f7c6d08a21','0x235b6df21a5d38abb20e8f8cc6d98e56d7fb0fe6','0x247648f73f1d13ed4461a36b7dac5a8fc09e5df4','0x25fc8577d6116c752a1eb2d3276dbb8a15d8431f','0x28175de4df06a1ebc629262e745d5b5eefeb02ab','0x28521a5b7e439d3b0b8e13c5ca66de26cf6e756c','0x291f51d06ffc77347d1ced2bed0c42a60cc4a788','0x2a01d339d3ab41b2d8b145b5df8586032d9961c6','0x2a81703e309e3467a1b89a7bdd399320f60240ad','0x2b03f80edfce556848594d45a9819e64d30365fd','0x2b4db254d2b1a3f0d85d1bee851d67dffd917051','0x2bbcd3e51661c5005173d44d6561a3a339588e06','0x2dfb5dc942280be73315cbab54b099c2541a0482','0x2f3a97ead2453d432b061d52a1ea4c2aba130869','0x2f5f6c22bfad5e9c1c0bf0c4e7505055a795bf86','0x3111b016fac1d83d2a56f9ebad3dd2df86295c2c','0x315f78aa18342155b65d87976c5ac1cefaf5d1de','0x33733ac7a29d8b9fee1438427293868653332116','0x3402bb4fdb0e64a497da7416de3ca0e50fdcf259','0x34e4b118778f634e6c049acfda86a3475c9d819d','0x357599444a22a7f37b786ee2ae975a9a2420b4aa','0x374534de1dfd0b0f965600d887f452f7035ea08b','0x38d2f78f1731bfdc264a43412ba1c0136f616036','0x39b557a249706cac1dffe157ce5d25ff1791b56f','0x3a27a89d203fdd6f241c43b4ccc667dff10f32a6','0x3ba3a0b63adbd04d4be49524d6a591390c6b7d76','0x3d5c5c7bb9c44aa79fe12a7b109647872e7d9102','0x3eb6001f4a3448ec7896095a7eb0d4c9c85db8ba','0x406a7a625093487a58d6ffe773a2c09687500737','0x421b25d6321c3aa3ce75274cb2cdf9b4b194fb22','0x42e2564f90ecfe0f9f72322740679b76fe56ea15','0x435c943e85594b06855cfe4d7de5c439514f5890','0x444e591404f12d98c5831f20ed3446c9ba4a2556','0x44b70ae56fba516b7468e4996ff4b8005d09d1b0','0x47db98965ff692421096a851b9eb6d630b08cb9d','0x4864ee998892f3a1e26ac06aeb07d685829fe82b','0x4ced87d43e3039117d4772c1540501e1774f796d','0x4d0bf3c6b181e719cdc50299303d65774dfb0af7','0x53600fbc155e8e1692a6248732de704a78da016d','0x53ae2b3505b8ea5469cca95f8c38906bb7122667','0x542a5651f84145efaaf8dc470e2adc2922877807','0x543ac0ba2fcfee44ac6f79c315424b0ac25de89a','0x5520082cafe40f2de90dbdaf29a2ecc606b8f9af','0x58f5ce1bdcb2d87eccc0ca2fd8d5073e4ec316a5','0x59c8dffe490f4fe12fb1e5ea37a2e715d8b93e10','0x5dfa160e0f96ce631d28649d02bb7738d69fe761','0x6037a1cd82bbdf122f87be424bad2ef1e28a0463','0x6054d61eb4c4153b7f5bfc31cb0f20bc85777e7d','0x64622e1058d418b44fee143ca2d4661bc830bf07','0x651f7c70f0b18a6020b1e49cb74840714f230612','0x667aeda8cd06b6375f8455e59b36cf22f9f12605','0x6ce798bc8c8c93f3c312644dcbdd2ad6698622c5','0x6fa396f81912617b8b640987d9936728abe9ef63','0x7699dbf13e1eddf9e4bced538462281eee1bc22a','0x7714dff527359adfb39152888ab0318482360e23','0x78474b4a554f22b92dcb1003adc177a0e4576a76','0x7b6a308703cdb78357911b7d26cca1649b791458','0x7ba11a17d6b3290f2bd8a350d1f1b0887f98dc32','0x7c8c8c5a4ad247434225511d23a05e31959b69b4','0x7cd4854339e35fa0243792685baebce73d6a23d1','0x7f30b4b9954316e4508ed1c2634d47d836dc90af','0x82e38f1a06fd2692ab9275bde75092341b8f187c','0x83ccd77792559263d22ecb1071d7ba1442946c68','0x8419061de7f16e47cb6ff47056f009ce7c3d62ce','0x84a9e0c0c3ffa1f460862c1e97521e5cdd428cad','0x84bd2dd1a477bbf1487a6cbd6aead7eb865e0ff2','0x878343772c25c2a3de58b33c6626df30d7bd4119','0x87cdd83c85283956be7627f269d5d7ffd7e772eb','0x8836e7a2140219220accf1bde5ec9342a44ed2f1','0x887299cf58a3f0ba1f6ee59122e19a65eefe2bb0','0x8beff7cf4391112ff2f4ec23563f7416bd38e830','0x8d4583655cc7a5b36ee3abe3747176b42b698ec4','0x96fdc5749f8dce1adb20b942c2f3fdeabe35e1e1','0x9816e8e49082085ca4e3cdfd9ac781179766bf45','0x98b44923def45b65d69fa82fc5fb04a348fc81b1','0x98ea82ac93165f77d69a4fd3243b121f1c56e4a8','0x9b100fd8521ece6b954d7ac5d83481b9c1a685f0','0x9c0fe354f36fd0717e9d41e2a3c1d325f450d824','0x9cf5dec27768855d478152128851ebde74f6a3ed','0x9f4f81832a8d552b51001d5cd97f195573dede26','0xa00a6bd4590112981bb71711f59f536696d4f839','0xa33b3ca53c9d60a5d4d195e22fefa73f88ba81be','0xa372c078eee7da14c509e762672d81ecf85267ad','0xa53ef1069a7a2c1fdc16df0009e40702f170150c','0xa563ec4b2f3937b9f8285cbfdf427fa22503471c','0xa5982de42a0c32f21ab0180d96c7a5bf82af11bf','0xaa2cf60c31488f17a307ea8f7c92727a4e9fd2cb','0xae9cda1d8ee9718be130ae545019496ae1413258','0xb084f058fc9fa3d3b84c7b954914e0a7c8d847f3','0xb37f4c3ae29fd04c454867a2586d02cee47f52f5','0xb5c6dd0d3be180f052b85563c12b115b2bafed4d','0xb66df7e12d14d72429bdee51049f7ad512ba5838','0xb7707b8e88241e77064725099113896bed5c3ed0','0xb90828ceb8475039e84b0f41c695fcc817fd2ea5','0xbb40bb5e8adb32920d843d3f805203672b1a3dad','0xbcfea7c894cbd0cf5fe654559268f2eb28c7c659','0xbd039b3392addf3d3279b1c01e750f2cc5167519','0xbd2760cce51f4737c8012b60c2e511e2d99dee65','0xbd942abaf028f37ad0128dce4d55e83533df5ffe','0xbdd954ebda44b38cdf3549c6120d4a022b561703','0xbf5dbe8fd00968334e5675c5f0161b2d35a9449b','0xc1804fa638847a1138dd740578ee433da75bb9f6','0xc24d5b145c21f570a38cbb95cfd8ebb923182732','0xc2f094439cd1fc45af3e8a679984927abab0d3d9','0xc7535efaa450987b705d00e0ea8108c8f52b1dc6','0xc866b23312b2a14fd5687c184bea44ae69d735e1','0xc9cef03f9204cd66f395ac2e0bb2626324718718','0xcbacb9cd469ba753462bb060d43cc4f665b5ab99','0xcf33761bea586bd099744ddb18f2acc4870fe888','0xd2927a91570146218ed700566df516d67c5ecfab','0xd3bfa407f25f185987bd088ea266122faee19690','0xd5b82f1efef871c931128faaa4484d4861d1cdd9','0xd75337cef33ace428a18533a1fb791acb1eff239','0xd861608c317e6e50386c24ddae49fd96aff0a98a','0xd9274155f08cc691095b1be26d01ca7bde8dfd3f','0xdc5a1c4c03fdeb635eb71f52632acd115cdcede4','0xdd555c8d41f47237bd934298e1f2acc0095cc569','0xde1a1e19d76e5d0f136b9b7f879cd8784a65eb38','0xde344a8dc5fcbe8233556aa0a06f43bab6ad9746','0xdeedb18a5a08a6d3622a2fca03c09afb5719280b','0xdf67361193d52ee42cb759eb98ce2c7978dd440e','0xe2d596e7a01b9545c2d6127a34c20756cc783bd5','0xe506f6b365724b4f25cb3e66f672010f98d02ce0','0xe5a7a206e9a8769f90ca792ebb68e9268231f717','0xe5d4924413ae59ae717358526bbe11bb4a5d76b9','0xe5e98df807c3c4f8e57eeeed0968895b2ea5fefb','0xe7420f4b26a565186ccdf5c3d356c62b127c81ef','0xeb7a12fe169c98748eb20ce8286eaccf4876643b','0xec6a2a5c14a9193f07f0ccac63eb4b028714ad9c','0xecf14386bf1f271aecb5407e777d41e8a16933b7','0xed1c710ad28e9aca013178a4e8d43a580b4b0dbf','0xefe56c0bd8b8a2fc9414d4ce91d1b4f2db51f130','0xeffb0a104543b9037b4391fc710221b38ba0a9c4','0xf181fb5b46df60e8babdb3ad52bbb98ff0be2b81','0xf339d6b131ffce3efd11d97e5a50e14a9c238e0e','0xf3d9281fa183b74f32b96e1c5244596045f4ede8','0xf3edbde6fdf7389021672f61dd79cb904aa36392','0xf70bd5596f83110208db05b413ff8ed907cf778f','0xf7d0c52f291cade662d493d3ed7b0ab73528cb51','0xf8b539d40657d56cf505b1c00c5181acdfd146d0','0xf8c65c647fb49edc1595e95cef90d5b612828f6b','0xfabe2b0814e12072dfe5e28520bfeb8eaf4bf88c','0xfb45542da0f4447b13819e3a1f97d041de186914','0xfb7d7c678c6bfc03952d9c9c7427d3fb8d3142f9','0xfdbb95011d6e1c17f19f4e150595b41a9f065e5d','0xfe6a32d36f7fc1ad36e8607da52d2e9b3e8ab06a']
                .map(x => web3.utils.soliditySha3(x));
            //const leaves = ['0x6A0a993cc824457734EC7Cac50744a34EcAf34D4','0x8703a1aC3a2474eE68A1154B7538172f9865192c','0xE51B692Ee9671E7EA69022D1C70bdCF16fff07c5','0xE220F9370Af26471Eba309975E827B66BaDbD4F5'].map( x => web3.utils.soliditySha3(x));
            // 0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496
            
        
            const tree = new MerkleTree(leaves, web3.utils.soliditySha3, { sort: true });
            
            const root = tree.getHexRoot();

            console.log('root: ',root);

            function sharry(first,second) {
                return web3.utils.soliditySha3(web3.utils.encodePacked(first,second));
            }

            function manualCheck(proof) {
                for(i = 0; i< proof.length; i++) {
                    sharry
                }
            }
            function proveAnyone(address) {
                var leaf = web3.utils.soliditySha3(address);
                var proof = tree.getHexProof(leaf);
                if (tree.verify(proof,leaf,root)){
                    return tree.getHexProof(leaf);
                }
            }
            
        </script>
    </body>

    
</html>